<div class="flex-row border-card border-solid rounded-lg mb-4">
  <div class="mb-2 flex">
    <div class=" ml-3 flex mr-auto font-bold text-lg items-center text-left">{{card.title}}</div>
      <button class="right-0 relative ml-4 text-sm focus:outline-none group">
        <div class="flex items-center justify-between h-10 w-10 hover:bg-gray-100 rounded-full">
            <svg class="w-5 h-5 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path  stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
            </svg>
        </div>
        <div  class="absolute right-0 font-bold flex-col rounded-lg items-start hidden w-40 mt-1 pb-1 bg-white border border-white-800 shadow-xl group-focus:flex">
          <a (click)="onClickOpenCard()" class="w-full px-4 py-2 rounded-t-lg text-left hover:bg-gray-100 flex items-center">
              <svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /> <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" /></svg>
              Edit
          </a>
          <a (click)="onClickDelete()" class="text-red-500 font-bold w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center">
              <svg class="mr-2" fill="red" width="15px" height="15px"  viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg"><path d="M767 336H233q-12 0-21 9t-9 21l38 505q1 13 12 21.5t30 8.5h434q18 0 29-8.5t13-21.5l38-505q0-12-9-21t-21-9zM344 841q-10 0-18-9t-8-21l-26-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5l18 386q0 12-7.5 21t-18.5 9zm182-31q0 13-7.5 22t-18.5 9-18.5-9-7.5-22l-4-385q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm156 1q0 12-8 21t-18 9q-11 0-18.5-9t-7.5-21l18-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm101-605l-179-30q-12-2-15-15l-8-33q-4-20-14-26-6-3-22-3h-90q-16 0-23 3-10 6-13 26l-8 33q-2 13-15 15l-179 30q-19 3-31.5 14.5T173 249v28q0 9 6.5 15t15.5 6h610q9 0 15.5-6t6.5-15v-28q0-17-12.5-28.5T783 206z"/></svg>
              Delete
          </a>
        </div>
      </button>  
  </div>

  <div class=" ml-3">{{card.description}}</div>

  <div class="flex mt-4 ml-3">
    <svg class="mr-2" width="20px" height="20px" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill="black" d="M5.67326018,0 C6.0598595,0 6.37326018,0.31324366 6.37326018,0.699649298 L6.373,2.009 L13.89,2.009 L13.8901337,0.708141199 C13.8901337,0.321735562 14.2035343,0.00849190182 14.5901337,0.00849190182 C14.976733,0.00849190182 15.2901337,0.321735562 15.2901337,0.708141199 L15.29,2.009 L18,2.00901806 C19.1045695,2.00901806 20,2.90399995 20,4.00801605 L20,18.001002 C20,19.1050181 19.1045695,20 18,20 L2,20 C0.8954305,20 0,19.1050181 0,18.001002 L0,4.00801605 C0,2.90399995 0.8954305,2.00901806 2,2.00901806 L4.973,2.009 L4.97326018,0.699649298 C4.97326018,0.31324366 5.28666085,0 5.67326018,0 Z M1.4,7.742 L1.4,18.001002 C1.4,18.3322068 1.66862915,18.6007014 2,18.6007014 L18,18.6007014 C18.3313708,18.6007014 18.6,18.3322068 18.6,18.001002 L18.6,7.756 L1.4,7.742 Z M6.66666667,14.6186466 L6.66666667,16.284778 L5,16.284778 L5,14.6186466 L6.66666667,14.6186466 Z M10.8333333,14.6186466 L10.8333333,16.284778 L9.16666667,16.284778 L9.16666667,14.6186466 L10.8333333,14.6186466 Z M15,14.6186466 L15,16.284778 L13.3333333,16.284778 L13.3333333,14.6186466 L15,14.6186466 Z M6.66666667,10.6417617 L6.66666667,12.3078931 L5,12.3078931 L5,10.6417617 L6.66666667,10.6417617 Z M10.8333333,10.6417617 L10.8333333,12.3078931 L9.16666667,12.3078931 L9.16666667,10.6417617 L10.8333333,10.6417617 Z M15,10.6417617 L15,12.3078931 L13.3333333,12.3078931 L13.3333333,10.6417617 L15,10.6417617 Z M4.973,3.408 L2,3.40831666 C1.66862915,3.40831666 1.4,3.67681122 1.4,4.00801605 L1.4,6.343 L18.6,6.357 L18.6,4.00801605 C18.6,3.67681122 18.3313708,3.40831666 18,3.40831666 L15.29,3.408 L15.2901337,4.33697436 C15.2901337,4.72338 14.976733,5.03662366 14.5901337,5.03662366 C14.2035343,5.03662366 13.8901337,4.72338 13.8901337,4.33697436 L13.89,3.408 L6.373,3.408 L6.37326018,4.32848246 C6.37326018,4.7148881 6.0598595,5.02813176 5.67326018,5.02813176 C5.28666085,5.02813176 4.97326018,4.7148881 4.97326018,4.32848246 L4.973,3.408 Z"/></svg>
    <span>{{card.dueDate | date: 'EE dd MMM'}}</span>
  </div>


  <div class="mt-4 ml-3">
    <app-banner [card]="card"></app-banner>
  </div>
  
  
  <button class="right-0 relative mb-4 mt-4 ml-3 w-11/12 h-9 rounded-md bg-slate-200 text-sm focus:outline-none group hover:bg-slate-300">
    <div class="flex items-center rounded ">
      <div class="flex ml-2  mr-2 font-bold items-center justify-between">
        <span class="whitespace-nowrap">Move to:</span>
        <svg class="ml-48 h-5 w-5 text-black" viewBox="0 0 20 20" fill="currentColor" aria-hidden="ture"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" /></svg>
      </div>
    </div>
    <div class="absolute z-10 right-0 font-bold flex-col rounded-lg items-start hidden w-full mt-1 pb-1 bg-white border border-white-800 shadow-xl group-focus:flex">
      @for(item of currentBoard.catalogs; track item.id){
        @if(item.id !== list.id){
          <a (click)="onClickPatch(item.id)"  class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center">
            <svg class="mr-2" fill="#000000" width="12px" height="12px" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg" ><path d="M8.29289 2.29289C8.68342 1.90237 9.31658 1.90237 9.70711 2.29289L14.2071 6.79289C14.5976 7.18342 14.5976 7.81658 14.2071 8.20711L9.70711 12.7071C9.31658 13.0976 8.68342 13.0976 8.29289 12.7071C7.90237 12.3166 7.90237 11.6834 8.29289 11.2929L11 8.5H1.5C0.947715 8.5 0.5 8.05228 0.5 7.5C0.5 6.94772 0.947715 6.5 1.5 6.5H11L8.29289 3.70711C7.90237 3.31658 7.90237 2.68342 8.29289 2.29289Z"/></svg>          
              {{item.title}}
          </a>
        }
      }
    </div>
  </button>  
</div>

@if(isOpenCardVisible){
  <app-open-card (outputEvent)="handleOutputEvent($event)" [currentList]="currentList" [currentBoard]="currentBoard" [card]="card"></app-open-card>
}
